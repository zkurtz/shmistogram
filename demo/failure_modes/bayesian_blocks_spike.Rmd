---
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
reticulate::use_virtualenv('/Users/me/mycloud/repos/shmistogram/venv')
```

## Bayesian blocks: extreme spiking

Here is an example of a Bayesian blocks call that leads to poor visualization properties:

```{r fig.width=9, fig.height=5}
library(shmistogram)
set.seed(0)
py = reticulate::import("shmistogram")
data = py$simulations$cauchy_mixture(10000L)
bayb = shmistogram(data, 
    params=list(
        binning_method='bayesian_blocks',
        verbose=TRUE
    ),
    plotting_params=list(main="Bayesian blocks"),
    return_data=TRUE
)
```

The problem is clear upon examining the underlying bins: The potential for an extremely narrow bin creates the risk of exploding the density. Notice the bin with only 3 observations.
```{r}
round(bayb$data$crowd, 2)
```
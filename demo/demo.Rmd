---
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
use_virtualenv("~/mycloud/repos/shmistogram/venv")
# mpl = import('matplotlib')
# mpl$use('Agg')
```

## Examples

### Mixed data types

A shmistogram emphasizes point masses that may occur in a continuous variable, explicitly decomposing the distribution into a mixture of a multinomial and a piecewise uniform distribution. Such point masses are quite common:

- inconsistent rounding any continuous variable can introduce a mixture of point masses and relatively continuous observations
- "age of earning first driver's license" plausibly has structural modes at the legal minimum (which may vary by state) and otherwise vary continuously

Let's simulate a uniform distribution mixed with two point masses and a couple missing observations:

```{python, eval=FALSE}
import numpy as np
import shmistogram as sh

np.random.seed(0)
data = sh.simulations.cauchy_mixture(n=10000)
det = sh.Shmistogram(data)
x = det.plot(show=FALSE)
```

```{r echo=FALSE}
np = import('numpy')
sh = import('shmistogram')

np$random$seed(0L)
data = sh$simulations$cauchy_mixture(n=10000L)
det = sh$Shmistogram(data)
det$plot()
```

The histogram obscures the point masses somewhat. By contrast, the shmistogram uses red line segments to emphasize them. The legend bar at the top shows the relative portions of the data that compose the point masses (the "loners"), the relatively continous portion (the "crowd") and the missing values. 

A regularization term in the shmistogram binning algorithm (see [ details](#Details)) limits the number of shmistogram bins, evidently giving it an advantage over default histogram binning when the target is a uniform density.


### Variable bin width

The shmistogram's adaptive bin width leads to a higher-fidelity representation of complicated distributions without substantially increasing the number of bins:

<!-- ```{r fig.width=9, fig.height=5} -->
<!-- set.seed(0) -->
<!-- data = c( -->
<!--     rnorm(2000, mean=0, sd=10), -->
<!--     rnorm(500, mean = 4, sd = 0.5) -->
<!-- ) -->
<!-- par(mfrow = c(1, 2)) -->
<!-- hist(data, border=NA, col='grey', main = 'Histogram') -->
<!-- shmistogram::shmistogram(data) -->
<!-- ``` -->
